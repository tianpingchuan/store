CREATE TABLE TB_USER(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	USER_TYPE INT COMMENT'用户类型1商家 ,2买家',
	USER_NAME VARCHAR(20) NOT NULL UNIQUE COMMENT '用户名称',
	USER_CODE VARCHAR(20) NOT NULL COMMENT '用户账号',
	USER_PASS VARCHAR(20) NOT NULL COMMENT '用户密码',
	USER_PHONE VARCHAR(20) NOT NULL COMMENT '用户手机',
	IF_LOCK INT COMMENT'是否锁定1：不锁定；0：锁定',
	END_IP VARCHAR(20) COMMENT'最后登录IP',
	END_LOGINDATE DATETIME COMMENT'最后登录时间',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR (10),
	CREATE_DATE DATETIME,
	UPDATE_BY VARCHAR(10),
	UPDATE_DATE DATETIME	
)COMMENT'用户表';

CREATE TABLE TB_PRODUCT(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	CATALOG_ID BIGINT COMMENT'目录ID',
	PRODUCT_NAME VARCHAR(20) COMMENT '商品名称',
	PRODUCT_NUM VARCHAR(20) COMMENT '商品编号',
	PRODUCT_PICTURE VARCHAR(300) COMMENT '商品图片地址',
	PRODUCT_PRICE INT COMMENT'商品价格',
	PRODUCT_COUNT VARCHAR(20) COMMENT'商品库存数量',
	PUTAWAY_OR_SOLD_OUT INT COMMENT'商品上下架状态',
	PRODUCT_INTRO VARCHAR(20) COMMENT'商品介绍',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'商品表';

创建查询商品跟目录名称联系起来
CREATE VIEW SELECT_PRODUCT_CATALOG AS SELECT p.ROW_ID,p.CATALOG_ID,c.CATALOG_NAME,p.PRODUCT_NAME,p.PRODUCT_NUM,p.PRODUCT_FILE,p.PRODUCT_PRICE,p.PRODUCT_COUNT,p.PUTAWAY_OR_SOLD_OUT,p.PRODUCT_INTRO,p.ACTIVE_FLAG,p.CREATE_BY,p.CREATE_DATE,p.UPDATE_BY,p.UPDATE_DATE FROM TB_PRODUCT p LEFT JOIN TB_CATALOG c ON p.CATALOG_ID = c.ROW_ID;

CREATE TABLE TB_CATALOG(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	PARENT_CATALOGID BIGINT COMMENT'父级目录ID，最高级为-1',
	CATALOG_INFO VARCHAR(30) NOT NULL COMMENT '目录介绍',
	CATALOG_NAME VARCHAR(20) NOT NULL COMMENT '目录名称',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'商品目录表';

CREATE TABLE TB_INDENT(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	INDENT_CODE VARCHAR(50) COMMENT'订单编号',
	USER_ID BIGINT COMMENT'用户ID',
	TOTAL_PRICES BIGINT COMMENT'总价',
	ADDRESS_ID BIGINT COMMENT'收货地址ID',
	INDENT_STATE INT COMMENT'订单状态2:已收货1 发货0未发货',
	PAY_WAY INT COMMENT '支付方式1:支付宝，2:银行卡 3:微信',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'订单表';

CREATE VIEW SELECT_ADDRESS_USER_INDENT AS SELECT i.ROW_ID,i.INDENT_CODE,i.USER_ID,u.USER_NAME,i.TOTAL_PRICES,i.ADDRESS_ID,a.TRUE_ADDRESS,i.INDENT_STATE,i.PAY_WAY,i.ACTIVE_FLAG,i.CREATE_BY,i.CREATE_DATE,i.UPDATE_BY,i.UPDATE_DATE FROM TB_INDENT i LEFT JOIN tb_user u ON i.USER_ID = u.ROW_ID LEFT JOIN tb_address a ON i.ADDRESS_ID = a.ROW_ID;

CREATE TABLE TB_ORDER(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	INDENT_CODE VARCHAR(50) COMMENT'订单编号',
	PRODUCT_NUM  VARCHAR(30) COMMENT'商品编号',
	BAY_COUNT INT COMMENT'购买数量',
	PRODUCT_INFO VARCHAR(150) COMMENT'商品购买信息：商品-数量',
	TOTAL_PRICES BIGINT COMMENT'商品总价',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'订单列表';

CREATE TABLE TB_CART(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	USER_ID BIGINT COMMENT'用户ID',
	PRODUCT_NUM VARCHAR(20) COMMENT'商品编号',
	BAY_COUNT INT COMMENT'购买数量',
	TOTAL_PRICES INT COMMENT'商品总价',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'购物车表';

CREATE VIEW SELECT_USER_CART AS SELECT c.ROW_ID,c.USER_ID,u.USER_NAME,c.PRODUCT_NUM,c.BAY_COUNT,c.TOTAL_PRICES,c.ACTIVE_FLAG,c.CREATE_BY,c.CREATE_DATE,c.UPDATE_BY,c.UPDATE_DATE FROM TB_CART c LEFT JOIN tb_user u ON c.USER_ID = u.ROW_ID;

	private Long userId;// 用户ID
	private Long provinceCode;// 省（直辖市）CODE
	private Long cityCode;// 市CODE
	private Long areaCode;// 区CODE
	private String trueAddress;// 详细地址
	private Integer postCode;// 邮政编码
	private String userPhone;// 收货人电话

CREATE TABLE TB_ADDRESS(
	ROW_ID BIGINT PRIMARY KEY AUTO_INCREMENT COMMENT '主键',
	USER_ID BIGINT COMMENT'用户ID',
	PROVINCE_CODE BIGINT COMMENT'省code',
	CITY_CODE BIGINT COMMENT'市code',
	AREA_CODE BIGINT COMMENT '区code',
	TRUE_ADDRESS VARCHAR(100) COMMENT '详细地址',
	POST_CODE INT COMMENT'邮编',
	USER_PHONE VARCHAR(20) COMMENT'用户手机',
	ACTIVE_FLAG INT COMMENT'数据是否有效',
	CREATE_BY VARCHAR(10) COMMENT'创建人',
	CREATE_DATE DATETIME COMMENT'创建日期',
	UPDATE_BY VARCHAR(10) COMMENT'修改人',
	UPDATE_DATE DATETIME COMMENT'修改时间'	
)COMMENT'地址表';

查询地址信息创建的视图
CREATE VIEW SELECT_ADDRESS_USER AS SELECT a.ROW_ID,a.USER_ID,u.USER_NAME,a.PROVINCE_CODE,yt1.AREA_NAME AS PROVINCE_NAME,a.CITY_CODE,yt2.AREA_NAME AS CITY_NAME,a.AREA_CODE,yt3.AREA_NAME AS AREA_NAME,a.TRUE_ADDRESS,a.POST_CODE,a.USER_PHONE,a.ACTIVE_FLAG,a.CREATE_BY,a.CREATE_DATE,a.UPDATE_BY,a.UPDATE_DATE FROM TB_ADDRESS a LEFT JOIN tb_user u ON a.USER_ID = u.ROW_ID LEFT JOIN yt_cd_area yt1 ON a.PROVINCE_CODE = yt1.AREA_CODE LEFT JOIN yt_cd_area yt2 ON a.CITY_CODE = yt2.AREA_CODE LEFT JOIN yt_cd_area yt3 ON a.AREA_CODE = yt3.AREA_CODE;